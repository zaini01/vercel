(this["webpackJsonpexample-partner"]=this["webpackJsonpexample-partner"]||[]).push([[0],{15:function(t,e,n){"use strict";n.r(e);var c=n(1),a=n(6),o=n.n(a),r=n(2),i=n.n(r),s=n(5),l=n(3),u=n(7),p=n.n(u),d=n(0);var f=function(){var t=Object(c.useState)(""),e=Object(l.a)(t,2),n=e[0],a=e[1],o=Object(c.useState)({}),r=Object(l.a)(o,2),u=r[0],f=r[1],h=Object(c.useState)({}),j=Object(l.a)(h,2),b=j[0],O=j[1],S=Object(c.useState)(!1),y=Object(l.a)(S,2),m=y[0],v=y[1],x="RSK",k="http://localhost:8000";Object(c.useEffect)((function(){f({}),a(p.a.parse(window.location.search).code),n&&N(n)}),[n]);var g=function(){var t=Object(s.a)(i.a.mark((function t(e){var n,c,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault(),(n=window.location.href).includes("?code=")&&(c=n.split("?code="),n=c[0]),console.log(n),a="".concat(k,"/?client_id=").concat(x,"&redirect_url=").concat(n),window.location.href=a;case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=Object(s.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault(),n={access_token:b.access_token,refresh_token:b.refresh_token,client_id:x},fetch("".concat(k,"/signOut"),{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(n)}).then((function(t){return t.json()})).then((function(t){v(!1),f({data:t})})).catch((function(t){v(!1),"SyntaxError: Unexpected token i in JSON at position 0"===t&&alert("invalid code")}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),N=function(){var t=Object(s.a)(i.a.mark((function t(e){var n,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c={code:e,client_id:x},fetch("".concat(k,"/exchangeCode"),{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(c)}).then((function(t){return t.json()})).then((function(t){localStorage.tokenSSO=JSON.stringify(t),n=JSON.parse(localStorage.tokenSSO),O(n);var e={access_token:n.access_token};return fetch("".concat(k,"/checkSSO"),{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)})})).then((function(t){return t.json()})).then((function(t){v(!1),f({data:t})})).catch((function(t){v(!1),"SyntaxError: Unexpected token i in JSON at position 0"===t&&alert("invalid code")}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return u.data&&u.data.name?Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"d-flex justify-content-center pt-5",children:Object(d.jsxs)("h1",{children:["WELCOME ",u.data.name.toString().toUpperCase()]})}),Object(d.jsx)("div",{className:"d-flex justify-content-center pt-5",children:Object(d.jsx)("button",{type:"submit",className:"btn-lg btn-primary",onClick:w,children:"logout"})})]}):m?Object(d.jsx)("div",{className:"d-flex justify-content-center p-5 m-5",children:Object(d.jsx)("div",{className:"spinner-border",style:{width:115,height:115,color:"lightblue"},role:"status"})}):Object(d.jsx)("div",{className:"d-flex justify-content-center pt-5",children:Object(d.jsx)("button",{type:"submit",className:"btn-lg btn-primary",onClick:g,children:"Login"})})};o.a.render(Object(d.jsx)(f,{}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.adf085b6.chunk.js.map